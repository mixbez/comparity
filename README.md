# Comparity üé¥

> Telegram –∏–≥—Ä–∞ –ø–æ –º–µ—Ö–∞–Ω–∏–∫–µ –Ω–∞—Å—Ç–æ–ª–∫–∏ ‚Äî –≤—ã—Å—Ç—Ä–∞–∏–≤–∞–π –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –±–ª–µ—Ñ—É–π!

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏ BOT_TOKEN, BOT_WEBHOOK_URL, MINI_APP_URL, JWT_SECRET

# 2. –ó–∞–ø—É—Å—Ç–∏ –≤—Å—ë –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
docker-compose up -d

# –ë—ç–∫–µ–Ω–¥ —Å–∞–º –Ω–∞–∫–∞—Ç–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥-–¥–∞–Ω–Ω—ã–µ
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
comparity/
‚îú‚îÄ‚îÄ backend/                 # Node.js: Telegraf bot + Fastify API
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bot/             # Telegraf handlers (start, play, stats, inline)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/             # Fastify REST API + SSE
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ game/            # Game engine (pure functions) + session logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db/              # PostgreSQL client + models
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ redis/           # Redis client + session helpers
‚îÇ   ‚îî‚îÄ‚îÄ migrations/          # SQL migrations + seed data
‚îú‚îÄ‚îÄ frontend/                # React Mini App (Telegram WebApp)
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ components/      # Chain, Cards, UI components
‚îÇ       ‚îú‚îÄ‚îÄ store/           # Zustand game state
‚îÇ       ‚îî‚îÄ‚îÄ api/             # API client + SSE subscriber
‚îî‚îÄ‚îÄ docs/                    # Architecture, DB schema, Roadmap
```

## –ò–≥—Ä–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞

### –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
1. –ë–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É (–æ—Ç–∫—Ä—ã—Ç—É—é) ‚Üí –Ω–∞—á–∞–ª–æ —Ü–µ–ø–æ—á–∫–∏
2. –ò–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –Ω–∞ —Ä—É–∫—É
3. –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –µ—ë –≤ –Ω—É–∂–Ω–æ–µ –º–µ—Å—Ç–æ —Ü–µ–ø–æ—á–∫–∏ (TWA drag-and-drop)
4. –ö–∞—Ä—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∏–ª–∏ –Ω–µ—Ç

### –ú–µ—Ö–∞–Ω–∏–∫–∞ –±–ª–µ—Ñ–∞
- –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É **—Ä—É–±–∞—à–∫–æ–π –≤–≤–µ—Ä—Ö**
- –î—Ä—É–≥–∏–µ –∏–≥—Ä–æ–∫–∏ –≤–∏–¥—è—Ç –±–ª–µ—Ñ-–∫–∞—Ä—Ç—É, –Ω–æ –Ω–µ –∑–Ω–∞—é—Ç –µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ
- –í —Ç–µ—á–µ–Ω–∏–µ **30 —Å–µ–∫—É–Ω–¥** –ª—é–±–æ–π –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å **¬´–û—Å–ø–æ—Ä–∏—Ç—å¬ª**
- –ï—Å–ª–∏ –±–ª–µ—Ñ –ø–æ–π–º–∞–Ω (–Ω–µ–≤–µ—Ä–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è) ‚Üí –±–ª–µ—Ñ—É—é—â–∏–π —Ç–µ—Ä—è–µ—Ç –æ—á–∫–æ, –æ—Å–ø–æ—Ä–∏–≤—à–∏–π –ø–æ–ª—É—á–∞–µ—Ç 2
- –ï—Å–ª–∏ –±–ª–µ—Ñ —É—Å—Ç–æ—è–ª (–≤–µ—Ä–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è) ‚Üí –±–ª–µ—Ñ—É—é—â–∏–π –ø–æ–ª—É—á–∞–µ—Ç 2 –æ—á–∫–∞, –æ—Å–ø–æ—Ä–∏–≤—à–∏–π —Ç–µ—Ä—è–µ—Ç 1

### –ì—Ä—É–ø–ø–æ–≤–æ–π —Ä–µ–∂–∏–º
- `@comparitybot` –≤ –≥—Ä—É–ø–ø–µ ‚Üí –≤—ã–±–æ—Ä –∫–æ–ª–æ–¥—ã ‚Üí –±–æ—Ç –ø–æ—Å—Ç–∏—Ç –∫–∞—Ä—Ç–æ—á–∫—É –≤ —á–∞—Ç
- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥–æ–ª–æ—Å—É—é—Ç –∑–∞ –ø–æ–∑–∏—Ü–∏—é –∫–Ω–æ–ø–∫–∞–º–∏
- 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ ‚Üí –ø–æ–±–µ–∂–¥–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ
- –ö–Ω–æ–ø–∫–∞ ¬´–û—Å–ø–æ—Ä–∏—Ç—å¬ª –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º –¥–æ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è

## API Endpoints

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| POST | `/api/auth` | Auth via Telegram initData |
| POST | `/api/sessions` | –°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É |
| GET | `/api/sessions/:id` | –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ |
| POST | `/api/sessions/:id/move` | –°–¥–µ–ª–∞—Ç—å —Ö–æ–¥ |
| POST | `/api/sessions/:id/challenge` | –û—Å–ø–æ—Ä–∏—Ç—å |
| GET | `/api/sessions/:id/stream` | SSE –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| GET | `/api/decks` | –°–ø–∏—Å–æ–∫ –∫–æ–ª–æ–¥ |
| GET | `/api/leaderboard` | –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ |

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –°–ª–æ–π | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|------|-----------|
| Bot | Node.js + Telegraf 4 |
| API | Fastify 4 + JWT |
| Frontend | React 18 + Vite + Tailwind |
| Drag & Drop | @dnd-kit/core |
| State | Zustand |
| DB | PostgreSQL 16 |
| Cache | Redis 7 |
| Infra | Docker Compose |

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](docs/ARCHITECTURE.md)
- [–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](docs/DATABASE.md)
- [Roadmap –Ω–∞ 2 –Ω–µ–¥–µ–ª–∏](docs/ROADMAP.md)
